## КРАТКИЕ ТЕОРЕТИЧЕСКИЕ СВЕДЕНИЯ 

Модульный принцип организации ПЭВМ позволяет подключать измерительную аппаратуру через соответствующий интерфейс непосредственно к магистрали ПЭВМ. На основе этого принципа, как правило, создают специализированные измерительно-вычислительные комплексы, ориентированные на подключение к ЭВМ небольшого числа измерительных и управляющих устройств. Для создания гибких, легко перестраиваемых и наращиваемых автоматизированных систем, необходимых в лабораторных исследованиях, рассмотренный подход практически не используется, поскольку физическая нагрузочная способность магистрали ПЭВМ ограничена. Непосредственное подключение к магистрали большого числа разнородных элементов измерительной аппаратуры и элементов управления практически невозможно, так как увеличение нагрузок приводит к снижению надежности работы ПЭВМ и всего комплекса в целом. 

В автоматизированных системах с небольшим числом каналов связи чаще всего применяют измерительно-управляющие платы (Plugin-Card), часто называемые платами ЦАП–АЦП. Их преимущества: во-первых, между ЭВМ и устройствами ввода-вывода отсутствуют промежуточные звенья, а во-вторых, вследствие расположения непосредственно в слотах на материнской плате IBM/PCсовместимого компьютера может быть существенно повышена скорость обмена данными и командами. Выпускаются платы с собственными микропроцессорными средствами обработки, быстрыми буферами-накопителями типа FIFO (First Input — First Output), а технические характеристики лучших образцов приближаются к аналогичным для функциональных модулей магистральномодульных систем.  

Типичный состав плат ЦАП–АЦП следующий: входной коммутатор — 8–64 канала; АЦП — 8–16 разрядов; ЦАП — 8–16 разрядов; встроенные программируемые счетчики/таймеры; порты цифрового ввода-вывода (8–128 разрядов).  

Недостатки использования плат ЦАП–АЦП для автоматизации: 

1. отсутствие в относительно дешевых платах выходного буфера в ЦАП, что вызывает необходимость работы в реальном времени; 
2. относительная дороговизна плат и потребность (особенно для импортных плат) в дорогом лицензионном программном обеспечении; 
3. невысокая мощность сигналов управления, ограниченная параметрами блока питания ПЭВМ. 

Измерительно-управляющие комплексы на базе плат ЦАП– АЦП целесообразно создавать и использовать при удалении комплекса от объекта исследования не более чем на несколько метров (в противном случае будет существенно нарушаться синхронизация процессов и снижаться надежность обмена данными, что повлечет за собой необходимость применения дорогостоящих фильтров и других систем помехоподавления). 

Кроме того, применение таких комплексов целесообразно при управлении физическими объектами, в которых процессы изменяются относительно медленно, не требуют высокого быстродействия, а также при небольшом числе каналов измерения и управления и плат сопряжения, необходимых для автоматизации стенда, так как число слотов расширения в ПЭВМ ограничено. 
Несколько снизить стоимость автоматизации стенда позволяет использование внешних систем сбора данных, подключаемых к ПЭВМ через последовательный порт или USB-шину, однако при этом, как правило, снижается быстродействие системы. Применение USB-интерфейса предоставляет пользователю ряд существенных преимуществ. Так, при использовании стандартных устройств АЦП/ЦАП для ПЭВМ, подключаемых через шину ISA либо PCI, в процессе решения некоторых задач возникают неудобства, связанные с необходимостью установки платы внутрь ПЭВМ, с конфигурированием компьютера для корректной работы плат, а также с невозможностью использования таких плат с портативными компьютерами типа ноутбука.  

Одним из возможных вариантов решения сформулированных выше проблем, когда необходимо иметь устройство, которое можно было бы быстро и удобно подключать к стандартным ПЭВМ, а также к компьютерам типа ноутбука и промышленным компьютерам, является использование внешних модулей, подключаемых по шине USB. Благодаря встроенным линиям питания, обеспечивающим силу тока до 500 мА, шина USB часто позволяет применять устройства без внешнего блока питания.  

Все подключаемые к шине USB устройства конфигурируются автоматически благодаря реализации принципа Plug&Play, в соответствии с которым операционная система сама определяет тип подключенного устройства и загружает необходимый для данного устройства драйвер. При этом не возникает вопросов о номере используемого прерывания, адресах портов, прямом доступе к памяти и т. д. Кроме того, спецификация шины USB допускает «горячее» (т. е. при включенном питании компьютера) подключение/отключение устройств.  

В качестве примера платы ЦАП–АЦП в лабораторной работе рассматриваются модуль E14-440, содержащий встроенный процессор, и модуль E14-440 без цифрового процессора. Модуль E14-440 является современным универсальным программно-аппаратным устройством для использования с шиной USB, предназначенным для построения многоканальных измерительных систем ввода, вывода и обработки аналоговой и цифровой информации в составе персональных IBM-совместимых компьютеров. 

Модуль E14-440 обладает следующими функциональными характеристиками:

*	цифровой сигнальный процессор (Digital Signal Processor — DSP) ADSP-2185M с тактовой частотой работы 48 МГц;  
*	16 дифференциальных каналов или 32 канала с общей «землей» для аналогового ввода при возможности автоматической корректировки данных;  
*	максимальная частота работы 14-битного АЦП — 400 кГц;  
*	два входа для внешней цифровой синхронизации ввода аналоговых сигналов;  
*	порт цифрового ввода/вывода, имеющий 16 входных и 16 выходных линий;  
*	два канала аналогового вывода 12-битного ЦАП с максимальной суммарной частотой 125 кГц;  
*	максимальная пропускная способность по шине USB — не более 500 кСлов/с.  

Модуль E14-440 является малогабаритным многофункциональным измерительным устройством, которое позволяет решать ряд типичных задач обмена данными с экспериментальной плазменной установкой:  

*	непрерывный потоковый многоканальный ввод аналоговой информации с суммарной частотой до 400 кГц;  
*	непрерывный потоковый двухканальный вывод аналоговой информации с суммарной частотой до 125 кГц;  
*	одновременный непрерывный потоковый ввод/вывод аналоговой информации с частотами 250 кГц (ввод) и 125 кГц (вывод);  
*	однократное асинхронное управление 16 цифровыми входными и 16 цифровыми выходными линиями. Эта операция достаточно медленная — время выполнения порядка 10…20 мс.  

Этот модуль можно рассматривать в качестве компактного и недорогого устройства для многоканального потокового сбора информации. Он представляет собой законченную систему со встроенным процессором. Это обстоятельство позволяет пользователю создавать собственные специализированные алгоритмы реального времени по обработке сигналов и реализовывать их на уровне программирования процессора, установленного в модуле.  

Несмотря на то что в модуле установлен процессор, большинству пользователей, как правило, не приходится знакомиться с его системой команд, поскольку в комплект поставки модуля входит управляющая программа для процессора, позволяющая осуществлять ввод-вывод информации в различных режимах. В драйвере реализованы наиболее часто используемые алгоритмы ввода-вывода, поэтому написание собственных программ для сигнального процессора требуется только при решении специализированных задач, когда возникает, например, необходимость в перенесении отлаженных алгоритмов с платформы IBM PC. Так, DSP может обеспечивать ввод информации в режиме реального времени, анализировать полученные данные и сообщать ПЭВМ о результатах работы.  

Если модуль E14-440 используется только для обеспечения стандартного многоканального ввода информации в компьютер, нет необходимости программирования работы процессора на языке Ассемблер. Пользователю системы не придется также изучать низкоуровневое программирование модуля, поскольку в комплект штатной поставки входят готовые высокоуровневые библиотеки программ, написанных на языке С++.  

Одно из главных преимуществ применения именно цифрового сигнального процессора заключается в том, что чисто программным образом можно достаточно гибко изменять в довольно широких пределах алгоритмы работы модуля с периферийными устройствами. Кроме того, он поддерживает выполнение необходимой предварительной обработки данных. Так, с помощью прилагаемого драйвера могут быть организованы два циклических буфера: для приема данных с АЦП и для вывода данных на ЦАП. При поступлении из ПЭВМ команды на запуск АЦП драйвер ожидает накопления данных в первой половине буфера АЦП. После того как она заполнится готовыми данными с АЦП, дается команда на их передачу в ПЭВМ. При этом не прекращается сбор данных во вторую половину. После накопления данных во второй половине буфера опять дается команда на их передачу в ПЭВМ и продолжается сбор данных уже в первую половину. Такой алгоритм сбора данных и обмена ими продолжается до тех пор, пока из ПЭВМ не придет команда на останов работы АЦП. Интерфейсные функции прилагаемой библиотеки программ Lusbapi позволяют реализовывать разнообразные алгоритмы работы модуля E14-440 с АЦП независимо от состояния ЦАП, но основным режимом работы модуля является непрерывный потоковый сбор данных с АЦП.  

Аналогичный принцип реализован и в алгоритме работы ЦАП. 
Это позволяет значительно (по сравнению с системой без DSP) повысить скорость выполнения полного цикла «измерение — управление». Кроме того, в модуле установлено последовательное пользовательское программируемое постоянное запоминающее устройство, которое позволяет значительно расширить возможности реализации различных режимов работы.  